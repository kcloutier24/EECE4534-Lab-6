A full loopback driver needs to consider concurrent access to the device file. A reader and a writer may concurrently operate on the file. This will result in concurrent calls to *echo_read* and *echo_write*. Hence, using an unprotected buffer is not sufficient as this would lead to race conditions and corruption. A better approach is to use pre-implemented kernel data structures, such as the kernel FIFO: [kfifo](https://www.kernel.org/doc/html/v5.10/core-api/kernel-api.html#fifo-buffer) This portion develops a echo loopback driver. Anything written into the device can be read out identically.


1. Read the kfifo example: [bytestream-example](https://elixir.bootlin.com/linux/v5.10/source/samples/kfifo/bytestream-example.c). Focus in particular on the *fifo_write()* and *fifo_read()* functions. This particular example creates a FIFO access through the /proc file system. Hence, the code cannot be taken directly. Nonetheless, the implementations of *fifo_write()* and *fifo_read()* can applied to *echo_write()* and *echo_read()*.
2. Extact the relevant parts of the example and transfer them into our echo module to implement the loop back driver. Use the static allocation from the example (i.e. DYNAMIC is not defined). Use a small buffer size (32 characters). Pay attention that you declare and initialize the fifo, also copy the same mutex protection from the example.
3. Validate your work. Open one terminal, and issue ```tail -f /dev/echo0```. Use another shell to write characters into the device, such as: ```echo hello > /dev/echo0```.  
4. Next, we explore the blocking behavior. Terminate the ```tail -f /dev/echo0``` from the previous task. Write a long text into the device such as: ```echo What is the answer to the question of life, universe and everything > /dev/echo0```. What happens? Does the echo command terminate? Now, read out the content of the character device file and observe what happens to the writing command. Look through the code and indicate what causes the blocking behavior and why. Describe your findings on the issue for this question.
5.  Commit (reference the issue in the commit message), and close the issue. 
